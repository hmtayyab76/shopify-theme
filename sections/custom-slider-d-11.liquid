{% schema %}
{
  "name": "Choose Us",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Image with text"
    }
  ],
  "blocks": [
    {
      "type": "Block",
      "name": "Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon-img",
          "label": "Icon Image"
        },
        {
          "type": "text",
          "id": "sub-head",
          "label": "Sub Heading"
        },
        {
          "type": "text",
          "id": "sub-text",
          "label": "Sub text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Choose Us"
    }
  ]
}
{% endschema %}

<style>
    .why-choose-us-section-d-11 {
      border: 1px solid #e1e1e1;
      margin: 0 auto;

      background: #f3f3f3;
    }
    .slides-container-rs-d-11 {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 105px;
    }
    .why-choose-us-d-11 {
      display: flex;
      max-width: 1512px;
      height: 453px;
      padding: 13px 23px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 51px;
      flex-shrink: 0;
      margin: 0 auto;
    }
    .why-choose-us-main-heading-d-11 {
      color: #000;

      /* H3 - Gilroy */
      font-family: Gilroy;
      font-size: 40px;
      font-style: normal;
      font-weight: 700;
      line-height: 100%; /* 40px */
    }
    .why-choose-us-block-container-d-11 {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 105px;
    }

    .why-choose-us-block-d-11 {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
      max-width: 275px;
      height: 100%;
    }

    .gurantee-box-d-11 {
      width: 100%;
    }

    .why-choose-us-heading-d-11 {
      color: var(--Text-Color, #363636);
      text-align: center;
      font-family: Inter;
      font-size: 16px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%;
    }
    .why-choose-us-block-d-11 img {
      width: 103px;
      height: 107px;
    }
    .why-choose-us-sub-heading-d-11 {
      color: var(--Text-Color, #363636);
      text-align: center;
      font-family: Inter;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 150%;
    }
  @media screen and (min-width: 666px) {
     .slides-container-rs-d-11{
    transform: translateX(0%) !important;
  }
  }
    @media screen and (max-width: 666px) {
      .why-choose-us-d-11 {
      display: flex;
      max-width: 430px;
      height: 375px;
      padding: 13px 23px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 51px;
      flex-shrink: 0;
      margin: 0 auto;
  }
      .dot-rs-d-11 {
        height: 14px;
        width: 14px;
        margin: 0 5px;
        background: #d9d9d9;
        display: inline-block;
        border-radius: 50%;
        cursor: pointer;
      }
      .slides-container-rs-d-11 {
        display: flex;
        justify-content: flex-start !important;
        align-items: center;
        gap: 0px;
      }
      * {
        box-sizing: border-box;
      }

      .slider-rs-d-11 {
        overflow: hidden;
        width: 100%;
        position: relative;
      }

      .slides-container-rs-d-11 {
        display: flex;
        transition: transform 0.5s ease;
      }

      .slide-rs-d-11 {
        min-width: 100%;
        text-align: center;
      }

      .slider-dots-rs-d-11 {
        text-align: center;
      }

      .active-rs-d-11 {
        background: var(--Color, #007dc8);
      }

      .main-rs-slider {
        width: 100%;
      }

      .inner-rs-slider {
        max-width: 275px;
        margin: 0 auto;
      }
      .why-choose-us-main-heading-d-11 {
        font-size: 32px;
      }

      .why-choose-us-block-d-11 {
        gap: 25px;
      }
      .why-choose-us-d-11 {
        gap: 25px;
        margin: 0px auto;
      }
      .why-choose-us-block-container-d-11 {
        width: 275px;
        overflow: hidden;
        margin: 0px auto;
        gap: 20px;
      }
      .slider-dots {
        text-align: center;
        margin-top: 10px;
      }

      .slider-dot {
        display: inline-block;
        width: 12.571px;
        height: 12.571px;
        border-radius: 50%;
        background-color: #e1e1e1; /* Default dot color */
        margin: 0 5px;
        cursor: pointer;
      }

      .active-rs-d-11 {
        background-color: #007dc8; /* Active dot color */
      }
    }
</style>

<section class="why-choose-us-section-d-11">
  <div class="why-choose-us-d-11">
    <div class="why-choose-us-main-heading-d-11">
      {{ section.settings.heading }}
    </div>
    <div class="inner-rs-slider">
      <div id="slider-rs-d-11" class="slider-rs-d-11">
        <div class="slides-container-rs-d-11 ">
          {% for block in section.blocks %}
            <div class="why-choose-us-block-d-11 slide-rs-d-11">
              <img src="{{ block.settings.icon-img | image_url }}" alt="" width="" height="">
              <div>
                <h4 class="why-choose-us-heading-d-11">{{ block.settings['sub-head'] }}</h4>
                <p class="why-choose-us-sub-heading-d-11">{{ block.settings['sub-text'] }}</p>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="slider-dots-rs-d-11 slider-dots"></div>
  </div>
</section>

<script>
  (function () {
    document.addEventListener('DOMContentLoaded', function () {
      const slider = document.querySelector('.slides-container-rs-d-11');
      const slides = document.querySelectorAll('.slide-rs-d-11');
      const dotsContainer = document.querySelector('.slider-dots-rs-d-11');
      let currentSlide = 0;

      function createDots() {
        for (let i = 0; i < slides.length; i++) {
          const dot = document.createElement('span');
          dot.classList.add('dot-rs-d-11');
          dotsContainer.appendChild(dot);
          dot.addEventListener('click', () => {
            goToSlide(i);
          });
        }
        updateDots();
      }

      function updateDots() {
        const dots = document.querySelectorAll('.dot-rs-d-11');
        dots.forEach((dot) => dot.classList.remove('active-rs-d-11'));
        dots[currentSlide].classList.add('active-rs-d-11');
      }

      function goToSlide(n) {
        slider.style.transform = `translateX(-${n * 100}%)`;
        currentSlide = n;
        updateDots();
      }

      let isDragging = false;
      let startPos = 0;

      function handleStart(evt) {
        isDragging = true;
        startPos = evt.type.includes('mouse') ? evt.clientX : evt.touches[0].clientX;
        slider.classList.add('grabbing');
      }

      function handleMove(evt) {
        if (!isDragging) return;
        const currentPos = evt.type.includes('mouse') ? evt.clientX : evt.touches[0].clientX;
        const moveX = currentPos - startPos;

        if (Math.abs(moveX) > 100) {
          // Minimum drag threshold in pixels
          if (moveX > 0 && currentSlide > 0) {
            goToSlide(currentSlide - 1);
          } else if (moveX < 0 && currentSlide < slides.length - 1) {
            goToSlide(currentSlide + 1);
          }
          isDragging = false;
        }
      }

      function handleEnd() {
        isDragging = false;
        slider.classList.remove('grabbing');
      }

      slider.addEventListener('mousedown', handleStart);
      slider.addEventListener('touchstart', handleStart);

      window.addEventListener('mousemove', handleMove);
      window.addEventListener('touchmove', handleMove);

      window.addEventListener('mouseup', handleEnd);
      window.addEventListener('touchend', handleEnd);

      createDots();
    });
  })();
</script>
