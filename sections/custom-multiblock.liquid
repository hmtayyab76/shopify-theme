{% schema %}
{
  "name": "Multi-Blocks",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Featured Products"
    }
  ],
  "blocks": [
    {
      "type": "multi_block",
      "name": "Multi-block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "text_title",
          "label": "Text Title",
          "default": "Text Title"
        },
        {
          "type": "textarea",
          "id": "text_content",
          "label": "Text Content",
          "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
        },
        {
            "type": "checkbox",
            "id": "checked",
            "label": "Check Box",
            "default": true
        }
      ]
    }
  ], 
  "presets": [
    {
      "name": "Multi Block Section"
    }
  ]
}
{% endschema %}


<style>
    .multi-block-section {
      padding: 40px 0;
      background-color: #f9f9f9;
    }
    
    .container-{{ section.id }} {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .multi-block {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      margin-bottom: 40px;
      height:350px;
      background-color: #ffffff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
    }
    /* Image Div */
    .multi-block .image-mb {
      width: 50%;
    }
    .multi-block .image-mb img {
      max-width: 100%;
      object-fit: cover;
      height: auto;
      border-radius: 8px 0 0 8px;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    
    .multi-block .content-{{ section.id }} {
      flex: 1;
      padding: 20px;
      width:50%;
    }
    
    .multi-block.image-left .content-{{ section.id }} {
      order: 2;
    }
    
    .multi-block.image-right .content-{{ section.id }} {
      order: 1;
    }
    
    .multi-block p {
      margin: 0;
      font-size: 18px;
      line-height: 1.5;
      color: #333333;
    }
    
    h2 {
      font-size: 32px;
      margin-bottom: 40px;
      text-align: center;
      color: #333333;
    }
    
   /* Responsive Styles */
  @media screen and (max-width: 768px) {
    .multi-block img {
      max-width: 100%;
      border-radius: 8px 8px 0 0;
    }
  
    .multi-block .content-{{ section.id }} {
      padding: 15px;
    }
    
    h2 {
      font-size: 24px;
      margin-bottom: 20px;
    }
  }

  @media screen and (max-width: 600px) {
    .multi-block img {
      max-width: 100%;
      border-radius: 8px 8px 0 0;
    }

    .multi-block:hover img {
      transform: translateY(-10px);
    }

    h2 {
      font-size: 20px;
      margin-bottom: 20px;
    }
  }
  
    
    .image-left {
      flex-direction: row-reverse;
    }
    
  </style>
  
 

  <section class="multi-block-section">
    <div class="container-{{ section.id }}">
      
      {% for block in section.blocks %}
        <!-- Check content_position setting to determine the content position -->
        <div class="multi-block {% if block.settings.checked %}image-left{% endif %}">
          <div class="image-mb">
            {% if block.settings.image %}
              <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.image }}" width="100%" height="100%">
              {% else %}
              <div class="image-with-text__media image-with-text__media--small gradient color-background-2 global-media-settings image-with-text__media--placeholder placeholder"><svg class="placeholder-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 525.5 525.5"><path d="M324.5 212.7H203c-1.6 0-2.8 1.3-2.8 2.8V308c0 1.6 1.3 2.8 2.8 2.8h121.6c1.6 0 2.8-1.3 2.8-2.8v-92.5c0-1.6-1.3-2.8-2.9-2.8zm1.1 95.3c0 .6-.5 1.1-1.1 1.1H203c-.6 0-1.1-.5-1.1-1.1v-92.5c0-.6.5-1.1 1.1-1.1h121.6c.6 0 1.1.5 1.1 1.1V308z"></path><path d="M210.4 299.5H240v.1s.1 0 .2-.1h75.2v-76.2h-105v76.2zm1.8-7.2l20-20c1.6-1.6 3.8-2.5 6.1-2.5s4.5.9 6.1 2.5l1.5 1.5 16.8 16.8c-12.9 3.3-20.7 6.3-22.8 7.2h-27.7v-5.5zm101.5-10.1c-20.1 1.7-36.7 4.8-49.1 7.9l-16.9-16.9 26.3-26.3c1.6-1.6 3.8-2.5 6.1-2.5s4.5.9 6.1 2.5l27.5 27.5v7.8zm-68.9 15.5c9.7-3.5 33.9-10.9 68.9-13.8v13.8h-68.9zm68.9-72.7v46.8l-26.2-26.2c-1.9-1.9-4.5-3-7.3-3s-5.4 1.1-7.3 3l-26.3 26.3-.9-.9c-1.9-1.9-4.5-3-7.3-3s-5.4 1.1-7.3 3l-18.8 18.8V225h101.4z"></path><path d="M232.8 254c4.6 0 8.3-3.7 8.3-8.3s-3.7-8.3-8.3-8.3-8.3 3.7-8.3 8.3 3.7 8.3 8.3 8.3zm0-14.9c3.6 0 6.6 2.9 6.6 6.6s-2.9 6.6-6.6 6.6-6.6-2.9-6.6-6.6 3-6.6 6.6-6.6z"></path></svg></div>
            {% endif %}
          </div>
          <div class="content-{{ section.id }}">
            <h2 class="">{{ block.settings.text_title }}</h2>
            <p>{{ block.settings.text_content }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const images = document.querySelectorAll(".multi-block img");
    
      const options = {
        root: null,
        rootMargin: "0px",
        threshold: 0.3
      };
    
      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = 1;
            observer.unobserve(entry.target);
          }
        });
      }, options);
    
      images.forEach((image) => {
        observer.observe(image);
      });
    });
  </script>